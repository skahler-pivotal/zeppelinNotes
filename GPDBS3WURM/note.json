{"paragraphs":[{"text":"%md\n## S3 + GPDB processing \"device\" data with Hot/Cold storage","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":9,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400650_-469403527","id":"20160831-200843_603171234","result":{"code":"SUCCESS","type":"HTML","msg":"<h2>S3 + GPDB processing &ldquo;device&rdquo; data with Hot/Cold storage</h2>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4904"},{"text":"%md\n&nbsp;\n*Note - if it suspected the data exists. head to the bottom of the Notebook and run the cleanup portion*","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":3,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400651_-469788276","id":"20161006-001524_929627050","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;\n<br  /><em>Note - if it suspected the data exists. head to the bottom of the Notebook and run the cleanup portion</em></p>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4905"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/scala","tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775479481_1318063242","id":"20161006-173759_1733271044","dateCreated":"2016-10-06T05:37:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:8860","text":"%psql\n--create the s3 protocol or at least make sure it exists\nCREATE OR REPLACE FUNCTION read_from_s3() RETURNS integer AS\n    '$libdir/gps3ext.so', 's3_import' LANGUAGE C STABLE;\nCREATE PROTOCOL s3 (readfunc  = read_from_s3);","dateUpdated":"2016-10-06T19:48:09+0000","dateFinished":"2016-10-06T05:38:07+0000","dateStarted":"2016-10-06T05:38:06+0000","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]}},{"text":"%md\n####It's time to go bigger\n\n####In a previous example we been worked with a dataset that has 100k elements in it of IOT device data. Let's try a dataset that is a little bigger. This dataset is generated by creatures in a game. Their statistics are constantly recorded to understand state much like a device or sensor would in the real world.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400652_-471712021","id":"20161005-145222_1304935136","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>It's time to go bigger</h4>\n<h4>In a previous example we been worked with a dataset that has 100k elements in it of IOT device data. Let's try a dataset that is a little bigger. This dataset is generated by creatures in a game. Their statistics are constantly recorded to understand state much like a device or sensor would in the real world.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4906"},{"text":"%psql\n\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160415;\n\nCREATE EXTERNAL TABLE s3_wurm_20160415 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160415 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');","dateUpdated":"2016-10-06T05:38:19+0000","config":{"tableHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorHide":false,"colWidth":6,"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400652_-471712021","id":"20161005-145453_596880704","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4907","dateFinished":"2016-10-06T05:38:20+0000","dateStarted":"2016-10-06T05:38:20+0000","focus":true},{"text":"%md\n####Here we see data that could be seen as similar to device data: name of the device, unique identifer, position, some state data and a timestamp","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400652_-471712021","id":"20161006-002110_667495113","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Here we see data that could be seen as similar to device data: name of the device, unique identifer, position, some state data and a timestamp</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4908"},{"text":"%psql\nSELECT * FROM s3_wurm_20160415 LIMIT 3;","dateUpdated":"2016-10-06T05:39:22+0000","config":{"graph":{"mode":"table","height":123,"optionOpen":false,"keys":[{"name":"wurmid","index":0,"aggr":"sum"}],"values":[{"name":"name","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"wurmid","index":0,"aggr":"sum"},"yAxis":{"name":"name","index":1,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400653_-472096769","id":"20161005-192448_1106634423","result":{"code":"SUCCESS","type":"TABLE","msg":"wurmid\tname\tage\thunger\tthirst\tdamage\tgender\tposx\tposy\trecordedat\n14015663617\tBrown cow\t48\t4500\t0\t\t1\t4968.23974609375\t530.30847167968795\t2016-04-15 14:10:01\n90972753409\tDog\t48\t0\t0\t\t0\t3419.2265625\t5477.6943359375\t2016-04-15 14:10:01\n195914239489\tBrown cow\t49\t0\t0\t\t1\t2817.8359375\t4747.7373046875\t2016-04-15 14:10:01\n","comment":"","msgTable":[[{"key":"name","value":"14015663617"},{"key":"name","value":"Brown cow"},{"key":"name","value":"48"},{"key":"name","value":"4500"},{"key":"name","value":"0"},{"key":"name","value":""},{"key":"name","value":"1"},{"key":"name","value":"4968.23974609375"},{"key":"name","value":"530.30847167968795"},{"key":"name","value":"2016-04-15 14:10:01"}],[{"key":"age","value":"90972753409"},{"key":"age","value":"Dog"},{"key":"age","value":"48"},{"key":"age","value":"0"},{"key":"age","value":"0"},{"key":"age","value":""},{"key":"age","value":"0"},{"key":"age","value":"3419.2265625"},{"key":"age","value":"5477.6943359375"},{"key":"age","value":"2016-04-15 14:10:01"}],[{"key":"hunger","value":"195914239489"},{"key":"hunger","value":"Brown cow"},{"key":"hunger","value":"49"},{"key":"hunger","value":"0"},{"key":"hunger","value":"0"},{"key":"hunger","value":""},{"key":"hunger","value":"1"},{"key":"hunger","value":"2817.8359375"},{"key":"hunger","value":"4747.7373046875"},{"key":"hunger","value":"2016-04-15 14:10:01"}]],"columnNames":[{"name":"wurmid","index":0,"aggr":"sum"},{"name":"name","index":1,"aggr":"sum"},{"name":"age","index":2,"aggr":"sum"},{"name":"hunger","index":3,"aggr":"sum"},{"name":"thirst","index":4,"aggr":"sum"},{"name":"damage","index":5,"aggr":"sum"},{"name":"gender","index":6,"aggr":"sum"},{"name":"posx","index":7,"aggr":"sum"},{"name":"posy","index":8,"aggr":"sum"},{"name":"recordedat","index":9,"aggr":"sum"}],"rows":[["14015663617","Brown cow","48","4500","0","","1","4968.23974609375","530.30847167968795","2016-04-15 14:10:01"],["90972753409","Dog","48","0","0","","0","3419.2265625","5477.6943359375","2016-04-15 14:10:01"],["195914239489","Brown cow","49","0","0","","1","2817.8359375","4747.7373046875","2016-04-15 14:10:01"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4909","dateFinished":"2016-10-06T05:39:24+0000","dateStarted":"2016-10-06T05:39:22+0000","focus":true},{"text":"%md\n####Selecting a count takes significantly longer.\n\n####The data set is made up of 59 files and over 1/2 GB of data in S3. We are accesing it with a single node. So what we did is pull in and parse 500MB of data from S3 to the database and then parse it on the fly.\n\n####In the previous query it was smart enough to know it needed only three rows and cut off the transfer of data early","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400653_-472096769","id":"20161005-152726_648476545","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Selecting a count takes significantly longer.</h4>\n<h4>The data set is made up of 59 files and over 1/2 GB of data in S3. We are accesing it with a single node. So what we did is pull in and parse 500MB of data from S3 to the database and then parse it on the fly.</h4>\n<h4>In the previous query it was smart enough to know it needed only three rows and cut off the transfer of data early</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4910"},{"text":"%psql\nSELECT COUNT(1) FROM s3_wurm_20160415;","dateUpdated":"2016-10-06T05:39:33+0000","config":{"graph":{"mode":"table","height":102,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400653_-470942523","id":"20161005-150450_624039901","result":{"code":"SUCCESS","type":"TABLE","msg":"count\n8392195\n","comment":"","msgTable":[[{"value":"8392195"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"}],"rows":[["8392195"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4911","dateFinished":"2016-10-06T05:40:09+0000","dateStarted":"2016-10-06T05:39:34+0000","focus":true},{"text":"%md\n\n####Maybe that is a bit too long for interactive querying\n\n####What we can we do to speed it up? \n\n####Move the data local and see if it speeds up our access time","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400654_-470942523","id":"20161005-153014_1355941495","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Maybe that is a bit too long for interactive querying</h4>\n<h4>What we can we do to speed it up?</h4>\n<h4>Move the data local and see if it speeds up our access time</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4912"},{"text":"%psql\n\nDROP TABLE IF EXISTS wurm_20160415;\n\nCREATE TABLE wurm_20160415 AS (SELECT * FROM s3_wurm_20160415) DISTRIBUTED BY (wurmid);\n\nANALYZE wurm_20160415;\n","dateUpdated":"2016-10-06T05:40:16+0000","config":{"tableHide":false,"graph":{"mode":"table","height":94,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400654_-470942523","id":"20161005-151627_1496028383","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4913","dateFinished":"2016-10-06T05:41:00+0000","dateStarted":"2016-10-06T05:40:16+0000","focus":true},{"text":"%md\n\n####Now lets check\n\n####Should be faster pulling from local disks","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400655_-471327272","id":"20161005-153729_1357079027","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Now lets check</h4>\n<h4>Should be faster pulling from local disks</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4914"},{"text":"%psql\nSELECT COUNT(1) FROM wurm_20160415;","dateUpdated":"2016-10-06T05:41:07+0000","config":{"graph":{"mode":"table","height":101,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400655_-471327272","id":"20161005-153853_1892294283","result":{"code":"SUCCESS","type":"TABLE","msg":"count\n8392195\n","comment":"","msgTable":[[{"value":"8392195"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"}],"rows":[["8392195"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4915","dateFinished":"2016-10-06T05:41:08+0000","dateStarted":"2016-10-06T05:41:07+0000","focus":true},{"text":"%md\n####Actually though, what we need to consider is that there is more data in the archive.\n \n####There is data out there for multiple days though, 4/15 - 4/24. We could put this all on one big external table but then we'd need to scan 10GB of external data every time the table was selected.\n\n####Let's say our use case involves doing some analytics and possible troubleshooting on the last couple days of data in real time. Though we do have a few reports we run on the whole time period.\n\n####We could move it all to the database, but we probably won't look at that deep data often if at all, and that would add millions of records we don't need to the database.\n\n####So let's take a look at Greenplum's ability to partition data. Partitioning can be used so that queries targeting a certain set of data only access the partitions that pertain to that. In addition the storage setting for partitions can be individually tuned for their use case.\n\n####In this instance we can use table partitioning and create a hot/cold storage setup.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":10,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400655_-471327272","id":"20161005-150653_1624640026","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Actually though, what we need to consider is that there is more data in the archive.</h4>\n<h4>There is data out there for multiple days though, 4/15 - 4/24. We could put this all on one big external table but then we'd need to scan 10GB of external data every time the table was selected.</h4>\n<h4>Let's say our use case involves doing some analytics and possible troubleshooting on the last couple days of data in real time. Though we do have a few reports we run on the whole time period.</h4>\n<h4>We could move it all to the database, but we probably won't look at that deep data often if at all, and that would add millions of records we don't need to the database.</h4>\n<h4>So let's take a look at Greenplum's ability to partition data. Partitioning can be used so that queries targeting a certain set of data only access the partitions that pertain to that. In addition the storage setting for partitions can be individually tuned for their use case.</h4>\n<h4>In this instance we can use table partitioning and create a hot/cold storage setup.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4916"},{"text":"%md\n&nbsp;\n####First we need to access the data so we create external tables that map to each of the folders containing data in S3\n\n####This is a fast process as we are only creating a metadata structure in the catalog with a pointer to where the actual data exists","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400656_-460939051","id":"20161005-194310_154304837","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>First we need to access the data so we create external tables that map to each of the folders containing data in S3</h4>\n<h4>This is a fast process as we are only creating a metadata structure in the catalog with a pointer to where the actual data exists</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4917"},{"text":"%psql\n\nSELECT 'creating a large number of external tables';\n\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160416 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160417 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160418 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160419 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160420 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160421 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160422 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160423 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160424 CASCADE;\n\nCREATE EXTERNAL TABLE s3_wurm_20160416 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160416 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160417 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160417 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160418 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160418 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160419 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160419 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160420 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160420 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160421 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160421 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160422 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160422 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160423 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160423 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');\n\nCREATE EXTERNAL TABLE s3_wurm_20160424 (\n    wurmid bigint, \n    name text, \n    age int, \n    hunger int, \n    thirst int, \n    damage int, \n    gender int, \n    posx float8, \n    posy float8, \n    recordedAt timestamp\n    )\nLOCATION ( 's3://s3.amazonaws.com/s3gpdb/wurm_granular/critter_20160424 config=/home/gpadmin/s3.conf' )\nFORMAT 'TEXT' ( DELIMITER '|' NULL AS '');","dateUpdated":"2016-10-06T05:41:21+0000","config":{"graph":{"mode":"table","height":94,"optionOpen":false,"keys":[{"name":"?column?","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"?column?","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400656_-460939051","id":"20161005-193252_1560070620","result":{"code":"SUCCESS","type":"TABLE","msg":"?column?\ncreating a large number of external tables\n","comment":"","msgTable":[[{"value":"creating a large number of external tables"}]],"columnNames":[{"name":"?column?","index":0,"aggr":"sum"}],"rows":[["creating a large number of external tables"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4918","dateFinished":"2016-10-06T05:41:21+0000","dateStarted":"2016-10-06T05:41:21+0000","focus":true},{"text":"%md\n####On to creating internal tables\n\n####We will match the external table schmea we are using in order to create the internal table. This process actually takes a little longer as we are creating physical files on the local machine to store data.\n\n####Instead of creating many individual tables we will also create one table and use partitioning to break up the table by day.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400656_-460939051","id":"20161005-194610_512170676","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>On to creating internal tables</h4>\n<h4>We will match the external table schmea we are using in order to create the internal table. This process actually takes a little longer as we are creating physical files on the local machine to store data.</h4>\n<h4>Instead of creating many individual tables we will also create one table and use partitioning to break up the table by day.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4919"},{"text":"%psql\nDROP TABLE IF EXISTS wurm_partitioned;\n\nCREATE TABLE wurm_partitioned (LIKE wurm_20160415)\nDISTRIBUTED BY (wurmid)\nPARTITION BY RANGE (recordedAt) (\n    START (date '2016-04-14') INCLUSIVE\n    END (date '2016-04-25') EXCLUSIVE\n    EVERY (INTERVAL '1 day')\n    ); ","dateUpdated":"2016-10-06T05:41:27+0000","config":{"tableHide":true,"graph":{"mode":"table","height":94,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","editorHide":false,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400657_-461323800","id":"20161005-152547_2062169754","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4920","dateFinished":"2016-10-06T05:41:27+0000","dateStarted":"2016-10-06T05:41:27+0000","focus":true},{"text":"%md\n\n####Now we have data sitting in S3 we can access with external tables and a partitioned table created on local storage but no data in it.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400657_-461323800","id":"20161005-152509_404649531","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Now we have data sitting in S3 we can access with external tables and a partitioned table created on local storage but no data in it.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4921"},{"text":"%md\n&nbsp;\n####Next we copy data from our external tables to local for the two days we are interested in\n\n####It's not very complicated syntax, but we're going to bring in 20 million records from S3 into a single node per day. \n\n####So it will take a couple of minutes each. It should be noted that adding more nodes would allow us to process the data in parallel. Each node reaches out and ingests data, thus adding more nodes would greatly decrease the time to ingest data.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":9,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400657_-461323800","id":"20161005-204105_1685162144","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>Next we copy data from our external tables to local for the two days we are interested in</h4>\n<h4>It's not very complicated syntax, but we're going to bring in 20 million records from S3 into a single node per day.</h4>\n<h4>So it will take a couple of minutes each. It should be noted that adding more nodes would allow us to process the data in parallel. Each node reaches out and ingests data, thus adding more nodes would greatly decrease the time to ingest data.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4922"},{"text":"%psql\nINSERT INTO wurm_partitioned \nSELECT * FROM s3_wurm_20160424;","dateUpdated":"2016-10-06T05:41:37+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400658_-460169554","id":"20161005-204242_1822754752","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n20351874\n","comment":"","msgTable":[[{"value":"20351874"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["20351874"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4923","dateFinished":"2016-10-06T05:43:37+0000","dateStarted":"2016-10-06T05:41:37+0000","focus":true},{"text":"%psql\nINSERT INTO wurm_partitioned \nSELECT * FROM s3_wurm_20160423;","dateUpdated":"2016-10-06T05:41:49+0000","config":{"graph":{"mode":"table","height":95,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400658_-460169554","id":"20161005-205021_1380091207","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n20310577\n","comment":"","msgTable":[[{"value":"20310577"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["20310577"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4924","dateFinished":"2016-10-06T05:45:24+0000","dateStarted":"2016-10-06T05:41:49+0000","focus":true},{"text":"%psql\nANALYZE wurm_partitioned;","dateUpdated":"2016-10-06T18:17:45+0000","config":{"tableHide":true,"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400658_-460169554","id":"20161005-231744_1978623027","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4925","dateFinished":"2016-10-06T18:17:53+0000","dateStarted":"2016-10-06T18:17:45+0000","focus":true},{"text":"%md\n####Now we've moved a little over 40 million records from external storage to internal storage can we query them?","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400659_-460554302","id":"20161005-210500_93992385","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Now we've moved a little over 40 million records from external storage to internal storage can we query them?</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4926"},{"text":"%psql\nSELECT COUNT(1) from wurm_partitioned;","dateUpdated":"2016-10-06T18:17:57+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400659_-460554302","id":"20161005-211123_2099488379","result":{"code":"SUCCESS","type":"TABLE","msg":"count\n40662451\n","comment":"","msgTable":[[{"value":"40662451"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"}],"rows":[["40662451"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4927","dateFinished":"2016-10-06T18:18:00+0000","dateStarted":"2016-10-06T18:17:57+0000","focus":true},{"text":"%psql\nSELECT COUNT(1) FROM wurm_partitioned \nWHERE recordedAt BETWEEN '2016-04-23 00:00:00' AND '2016-04-23 23:59:59'","dateUpdated":"2016-10-06T18:18:06+0000","config":{"graph":{"mode":"table","height":107,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400659_-460554302","id":"20161005-212644_760757483","result":{"code":"SUCCESS","type":"TABLE","msg":"count\n20310577\n","comment":"","msgTable":[[{"value":"20310577"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"}],"rows":[["20310577"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4928","dateFinished":"2016-10-06T18:18:08+0000","dateStarted":"2016-10-06T18:18:06+0000","focus":true},{"text":"%md\n####We can see that the time to query a smaller set of data on disk can be faster than the whole.\n\n####This is because partition elimination done by the optimizer can intelligently decide to not scan data which will not apply to the query","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400660_-462478047","id":"20161005-212838_634675290","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>We can see that the time to query a smaller set of data on disk can be faster than the whole.</h4>\n<h4>This is because partition elimination done by the optimizer can intelligently decide to not scan data which will not apply to the query</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4929"},{"text":"%psql\nEXPLAIN SELECT COUNT(1) from wurm_partitioned;","dateUpdated":"2016-10-06T18:18:18+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/scala","colWidth":10,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400660_-462478047","id":"20161005-232301_9928623","result":{"code":"SUCCESS","type":"TEXT","msg":"QUERY PLAN\nAggregate  (cost=628285.84..628285.85 rows=1 width=8)\n  ->  Gather Motion 6:1  (slice1; segments: 6)  (cost=628285.75..628285.83 rows=1 width=8)\n        ->  Aggregate  (cost=628285.75..628285.76 rows=1 width=8)\n              ->  Append  (cost=0.00..526621.78 rows=6777598 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_1 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_2 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_3 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_4 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_5 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_6 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_7 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_8 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_9 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_10 wurm_partitioned  (cost=0.00..263040.86 rows=3385348 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_11 wurm_partitioned  (cost=0.00..263571.92 rows=3392249 width=0)\nOptimizer status: legacy query optimizer\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4930","dateFinished":"2016-10-06T18:18:18+0000","dateStarted":"2016-10-06T18:18:18+0000","focus":true},{"text":"%md\n&nbsp;\nNote this will show local partitions until we do a swap out later. If refereshed at that point it will show the scans as external.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":2,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400660_-462478047","id":"20161006-001345_690535959","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;\n<br  />Note this will show local partitions until we do a swap out later. If refereshed at that point it will show the scans as external.</p>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4931"},{"text":"%psql\nEXPLAIN SELECT COUNT(1) FROM wurm_partitioned WHERE recordedAt BETWEEN '2016-04-23 00:00:00' AND '2016-04-23 23:59:59'","dateUpdated":"2016-10-06T18:18:25+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400661_-462862796","id":"20161005-211510_1676769418","result":{"code":"SUCCESS","type":"TEXT","msg":"QUERY PLAN\nAggregate  (cost=415371.72..415371.73 rows=1 width=8)\n  ->  Gather Motion 6:1  (slice1; segments: 6)  (cost=415371.62..415371.70 rows=1 width=8)\n        ->  Aggregate  (cost=415371.62..415371.63 rows=1 width=8)\n              ->  Append  (cost=0.00..364601.29 rows=3384689 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_10 wurm_partitioned  (cost=0.00..364601.29 rows=3384689 width=0)\n                          Filter: recordedat >= '2016-04-23 00:00:00'::timestamp without time zone AND recordedat <= '2016-04-23 23:59:59'::timestamp without time zone\nOptimizer status: legacy query optimizer\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4932","dateFinished":"2016-10-06T18:18:25+0000","dateStarted":"2016-10-06T18:18:25+0000","focus":true},{"text":"%md\n\n####So 4/23 and 4/24 are available in the database for the more interactive queries we are doing.\n\n####What about the data for 4/15 thru 4/22 we want this data to still be available.\n\n####We could potentially use UNION statments to join together results from queries to external tables to internal tables.\n\n####Another option is that we can swap out the pointers for those partitons on local disk to the external definitions.\n\n####Normally when swapping in a table to be a partition Greenplum does data validation. It makes sure the data conforms to what should be represented in the partiton. When working with external tables it is unable to do this as the data in the external location could change so it needs to be enacted 'WITHOUT VALIDATION' ","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400661_-462862796","id":"20161005-213312_1799424856","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>So 4/23 and 4/24 are available in the database for the more interactive queries we are doing.</h4>\n<h4>What about the data for 4/15 thru 4/22 we want this data to still be available.</h4>\n<h4>We could potentially use UNION statments to join together results from queries to external tables to internal tables.</h4>\n<h4>Another option is that we can swap out the pointers for those partitons on local disk to the external definitions.</h4>\n<h4>Normally when swapping in a table to be a partition Greenplum does data validation. It makes sure the data conforms to what should be represented in the partiton. When working with external tables it is unable to do this as the data in the external location could change so it needs to be enacted 'WITHOUT VALIDATION'</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4933"},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-22') WITH TABLE s3_wurm_20160422 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:40+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400661_-462862796","id":"20161005-221406_676071532","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4934","dateFinished":"2016-10-06T18:18:33+0000","dateStarted":"2016-10-06T18:18:33+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-21') WITH TABLE s3_wurm_20160421 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:38+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400662_-461708549","id":"20161005-221313_231981299","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4935","dateFinished":"2016-10-06T18:18:37+0000","dateStarted":"2016-10-06T18:18:37+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-20') WITH TABLE s3_wurm_20160420 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:33+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400662_-461708549","id":"20161005-221220_45822831","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4936","dateFinished":"2016-10-06T18:18:42+0000","dateStarted":"2016-10-06T18:18:42+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-19') WITH TABLE s3_wurm_20160419 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:31+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400662_-461708549","id":"20161005-221139_382000971","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4937","dateFinished":"2016-10-06T18:18:46+0000","dateStarted":"2016-10-06T18:18:46+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-18') WITH TABLE s3_wurm_20160418 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:24+0000","config":{"graph":{"mode":"table","height":97,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400663_-462093298","id":"20161005-221024_525608717","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4938","dateFinished":"2016-10-06T18:20:52+0000","dateStarted":"2016-10-06T18:20:51+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-17') WITH TABLE s3_wurm_20160417 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:21+0000","config":{"graph":{"mode":"table","height":97,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400663_-462093298","id":"20161005-213839_682155969","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4939","dateFinished":"2016-10-06T18:20:55+0000","dateStarted":"2016-10-06T18:20:55+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-16') WITH TABLE s3_wurm_20160416 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:26+0000","config":{"graph":{"mode":"table","height":103,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400663_-462093298","id":"20161005-214428_1974428945","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4940","dateFinished":"2016-10-06T18:18:52+0000","dateStarted":"2016-10-06T18:18:52+0000","focus":true},{"text":"%psql\n\nALTER TABLE wurm_partitioned \nEXCHANGE PARTITION FOR ('2016-04-15') WITH TABLE s3_wurm_20160415 WITHOUT VALIDATION;","dateUpdated":"2016-10-06T19:44:28+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400664_-464017043","id":"20161005-214512_1257246448","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4941","dateFinished":"2016-10-06T18:18:55+0000","dateStarted":"2016-10-06T18:18:55+0000","focus":true},{"text":"%md\n#### We now have a structure that looks like a single table \n\n#### It is actually made up of two partitions that contain local data and eight partitions of data that are located on S3\n\n#### If we run an EXPLAIN on a query that hits the entire table we can now see it is doing an External Scan for some of the partitions of the table","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400664_-464017043","id":"20161005-221821_1845834852","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>We now have a structure that looks like a single table</h4>\n<h4>It is actually made up of two partitions that contain local data and eight partitions of data that are located on S3</h4>\n<h4>If we run an EXPLAIN on a query that hits the entire table we can now see it is doing an External Scan for some of the partitions of the table</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4942"},{"text":"%psql\nEXPLAIN SELECT COUNT(1) from wurm_partitioned;","dateUpdated":"2016-10-06T18:21:17+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/scala","colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400664_-464017043","id":"20161006-161937_465750868","result":{"code":"SUCCESS","type":"TEXT","msg":"QUERY PLAN\nAggregate  (cost=736277.82..736277.83 rows=1 width=8)\n  ->  Gather Motion 6:1  (slice1; segments: 6)  (cost=736277.73..736277.81 rows=1 width=8)\n        ->  Aggregate  (cost=736277.73..736277.74 rows=1 width=8)\n              ->  Append  (cost=0.00..614613.78 rows=8110930 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_2 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_3 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_4 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_5 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_6 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_7 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_8 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  External Scan on wurm_partitioned_1_prt_9 wurm_partitioned  (cost=0.00..11000.00 rows=166667 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_1 wurm_partitioned  (cost=0.00..1.00 rows=1 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_10 wurm_partitioned  (cost=0.00..263040.86 rows=3385348 width=0)\n                    ->  Seq Scan on wurm_partitioned_1_prt_11 wurm_partitioned  (cost=0.00..263571.92 rows=3392249 width=0)\nOptimizer status: legacy query optimizer\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4943","dateFinished":"2016-10-06T18:21:18+0000","dateStarted":"2016-10-06T18:21:18+0000","focus":true},{"text":"%md\n&nbsp;\n####So this query to see the Top 5 most common creature types over the day of the 23rd would only hit 20 million rows of local data","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400665_-464401791","id":"20161005-222258_868823984","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>So this query to see the Top 5 most common creature types over the day of the 23rd would only hit 20 million rows of local data</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4944"},{"text":"%psql\n\nSELECT COUNT(DISTINCT(wurmid)), \n       name \nFROM wurm_partitioned \nWHERE recordedAt BETWEEN '2016-04-23 00:00:00' AND '2016-04-23 23:59:59'\nGROUP BY name\nORDER BY 1 DESC\nLIMIT 8;","dateUpdated":"2016-10-06T18:19:18+0000","config":{"graph":{"mode":"multiBarChart","height":194,"optionOpen":false,"keys":[{"name":"name","index":1,"aggr":"sum"}],"values":[{"name":"count","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"},"yAxis":{"name":"name","index":1,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":8,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400665_-464401791","id":"20161005-222340_67589976","result":{"code":"SUCCESS","type":"TABLE","msg":"count\tname\n1291\tBull\n1211\tBlack wolf\n1173\tBrown cow\n907\tMountain lion\n869\tHorse\n609\tDeer\n605\tBrown bear\n605\tPheasant\n","comment":"","msgTable":[[{"key":"name","value":"1291"},{"key":"name","value":"Bull"}],[{"value":"1211"},{"value":"Black wolf"}],[{"value":"1173"},{"value":"Brown cow"}],[{"value":"907"},{"value":"Mountain lion"}],[{"value":"869"},{"value":"Horse"}],[{"value":"609"},{"value":"Deer"}],[{"value":"605"},{"value":"Brown bear"}],[{"value":"605"},{"value":"Pheasant"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"},{"name":"name","index":1,"aggr":"sum"}],"rows":[["1291","Bull"],["1211","Black wolf"],["1173","Brown cow"],["907","Mountain lion"],["869","Horse"],["609","Deer"],["605","Brown bear"],["605","Pheasant"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4945","dateFinished":"2016-10-06T18:19:21+0000","dateStarted":"2016-10-06T18:19:18+0000","focus":true},{"text":"%md\n&nbsp;\n####Doing the same query on a date like the 18th will access a similar amount of data in S3, but will have a longer run time as it needs to bring all that data across the network.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400665_-464401791","id":"20161005-223704_1818009418","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>Doing the same query on a date like the 18th will access a similar amount of data in S3, but will have a longer run time as it needs to bring all that data across the network.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4946"},{"text":"%psql\n\nSELECT COUNT(DISTINCT(wurmid)), \n       name \nFROM wurm_partitioned \nWHERE recordedAt BETWEEN '2016-04-18 00:00:00' AND '2016-04-18 23:59:59'\nGROUP BY name\nORDER BY 1 DESC\nLIMIT 8;","dateUpdated":"2016-10-06T18:21:24+0000","config":{"graph":{"mode":"multiBarChart","height":199,"optionOpen":false,"keys":[{"name":"name","index":1,"aggr":"sum"}],"values":[{"name":"count","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"},"yAxis":{"name":"name","index":1,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":8,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400666_-463247545","id":"20161005-223754_1278551274","result":{"code":"SUCCESS","type":"TABLE","msg":"count\tname\n1413\tBull\n1298\tBrown cow\n1190\tBlack wolf\n1023\tHorse\n888\tMountain lion\n602\tDeer\n599\tPheasant\n568\tBrown bear\n","comment":"","msgTable":[[{"key":"name","value":"1413"},{"key":"name","value":"Bull"}],[{"value":"1298"},{"value":"Brown cow"}],[{"value":"1190"},{"value":"Black wolf"}],[{"value":"1023"},{"value":"Horse"}],[{"value":"888"},{"value":"Mountain lion"}],[{"value":"602"},{"value":"Deer"}],[{"value":"599"},{"value":"Pheasant"}],[{"value":"568"},{"value":"Brown bear"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"},{"name":"name","index":1,"aggr":"sum"}],"rows":[["1413","Bull"],["1298","Brown cow"],["1190","Black wolf"],["1023","Horse"],["888","Mountain lion"],["602","Deer"],["599","Pheasant"],["568","Brown bear"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4947","dateFinished":"2016-10-06T18:22:13+0000","dateStarted":"2016-10-06T18:21:24+0000","focus":true},{"text":"%md\n&nbsp;\n####Having the data avaialbe would allow you to do exploration and answer some immediate question that might come to mind\n\n####For example how many creatures exist on the 23rd that didn't exist on the 20th could be answered using both a partition of the local data and a partition of the external data","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400666_-463247545","id":"20161005-223545_1243843614","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>Having the data avaialbe would allow you to do exploration and answer some immediate question that might come to mind</h4>\n<h4>For example how many creatures exist on the 23rd that didn't exist on the 20th could be answered using both a partition of the local data and a partition of the external data</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4948"},{"text":"%psql\n\nSELECT COUNT(DISTINCT(wurmid))\nFROM wurm_partitioned \nWHERE recordedAt BETWEEN '2016-04-23 00:00:00' AND '2016-04-23 23:59:59'\nAND wurmid NOT IN (\n    SELECT wurmid \n    FROM wurm_partitioned\n    WHERE recordedAt BETWEEN '2016-04-20 00:00:00' AND '2016-04-20 23:59:59'\n    )\n","dateUpdated":"2016-10-06T18:22:27+0000","config":{"graph":{"mode":"table","height":99,"optionOpen":false,"keys":[{"name":"count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400666_-463247545","id":"20161005-224156_740953511","result":{"code":"SUCCESS","type":"TABLE","msg":"count\n921\n","comment":"","msgTable":[[{"value":"921"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"}],"rows":[["921"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4949","dateFinished":"2016-10-06T18:23:29+0000","dateStarted":"2016-10-06T18:22:27+0000","focus":true},{"text":"%md\n&nbsp;\n####Another example would be looking at the population of creatures day to day.\n\n####While you can get a feel for what is happening with the two days of local data.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400667_-463632294","id":"20161005-234203_1616729006","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>Another example would be looking at the population of creatures day to day.</h4>\n<h4>While you can get a feel for what is happening with the two days of local data.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4950"},{"text":"%psql\nSELECT COUNT(DISTINCT(wurmid)) as \"count\", recordedAt::date as \"date\", name\nFROM wurm_partitioned\nWHERE recordedAt BETWEEN '2016-04-23 00:00:00' AND '2016-04-24 23:59:59'\nAND name IN ('Black wolf','Horse','Brown cow','Bull','Brown bear','Mountain lion','Deer','Black Bear')\nGROUP BY recordedAt::date, name\nORDER BY date, name\n","dateUpdated":"2016-10-06T18:23:50+0000","config":{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"date","index":1,"aggr":"sum"}],"values":[{"name":"count","index":0,"aggr":"avg"}],"groups":[{"name":"name","index":2,"aggr":"sum"}],"scatter":{"xAxis":{"name":"date","index":1,"aggr":"sum"},"yAxis":{"name":"count","index":0,"aggr":"sum"},"group":{"name":"name","index":2,"aggr":"sum"}},"forceY":true},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400667_-463632294","id":"20161005-234217_1431904083","result":{"code":"SUCCESS","type":"TABLE","msg":"count\tdate\tname\n1211\t2016-04-23\tBlack wolf\n605\t2016-04-23\tBrown bear\n1173\t2016-04-23\tBrown cow\n1291\t2016-04-23\tBull\n609\t2016-04-23\tDeer\n869\t2016-04-23\tHorse\n907\t2016-04-23\tMountain lion\n1226\t2016-04-24\tBlack wolf\n612\t2016-04-24\tBrown bear\n1171\t2016-04-24\tBrown cow\n1291\t2016-04-24\tBull\n601\t2016-04-24\tDeer\n910\t2016-04-24\tHorse\n911\t2016-04-24\tMountain lion\n","comment":"","msgTable":[[{"key":"date","value":"1211"},{"key":"date","value":"2016-04-23"},{"key":"date","value":"Black wolf"}],[{"key":"name","value":"605"},{"key":"name","value":"2016-04-23"},{"key":"name","value":"Brown bear"}],[{"value":"1173"},{"value":"2016-04-23"},{"value":"Brown cow"}],[{"value":"1291"},{"value":"2016-04-23"},{"value":"Bull"}],[{"value":"609"},{"value":"2016-04-23"},{"value":"Deer"}],[{"value":"869"},{"value":"2016-04-23"},{"value":"Horse"}],[{"value":"907"},{"value":"2016-04-23"},{"value":"Mountain lion"}],[{"value":"1226"},{"value":"2016-04-24"},{"value":"Black wolf"}],[{"value":"612"},{"value":"2016-04-24"},{"value":"Brown bear"}],[{"value":"1171"},{"value":"2016-04-24"},{"value":"Brown cow"}],[{"value":"1291"},{"value":"2016-04-24"},{"value":"Bull"}],[{"value":"601"},{"value":"2016-04-24"},{"value":"Deer"}],[{"value":"910"},{"value":"2016-04-24"},{"value":"Horse"}],[{"value":"911"},{"value":"2016-04-24"},{"value":"Mountain lion"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"},{"name":"date","index":1,"aggr":"sum"},{"name":"name","index":2,"aggr":"sum"}],"rows":[["1211","2016-04-23","Black wolf"],["605","2016-04-23","Brown bear"],["1173","2016-04-23","Brown cow"],["1291","2016-04-23","Bull"],["609","2016-04-23","Deer"],["869","2016-04-23","Horse"],["907","2016-04-23","Mountain lion"],["1226","2016-04-24","Black wolf"],["612","2016-04-24","Brown bear"],["1171","2016-04-24","Brown cow"],["1291","2016-04-24","Bull"],["601","2016-04-24","Deer"],["910","2016-04-24","Horse"],["911","2016-04-24","Mountain lion"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4951","dateFinished":"2016-10-06T18:23:56+0000","dateStarted":"2016-10-06T18:23:50+0000","focus":true},{"text":"%md\n&nbsp;\n####The data makes much more sense if you were to mix in a larger history of the data.\n\n####Seeing this of course you would realize that creating a rollup of this type of data would make sense.","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400668_-465556038","id":"20161005-235111_181716330","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>The data makes much more sense if you were to mix in a larger history of the data.</h4>\n<h4>Seeing this of course you would realize that creating a rollup of this type of data would make sense.</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4952"},{"text":"%psql\nSELECT COUNT(DISTINCT(wurmid)) as \"count\", recordedAt::date as \"date\", name\nFROM wurm_partitioned\nWHERE recordedAt BETWEEN '2016-04-18 00:00:00' AND '2016-04-24 23:59:59'\nAND name IN ('Black wolf','Horse','Brown cow','Bull','Brown bear','Mountain lion','Deer','Black Bear')\nGROUP BY recordedAt::date, name\nORDER BY date, name","dateUpdated":"2016-10-06T18:25:06+0000","config":{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"date","index":1,"aggr":"sum"}],"values":[{"name":"count","index":0,"aggr":"avg"}],"groups":[{"name":"name","index":2,"aggr":"sum"}],"scatter":{}},"editorMode":"ace/mode/scala","colWidth":6,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400668_-465556038","id":"20161005-235123_1630641787","result":{"code":"SUCCESS","type":"TABLE","msg":"count\tdate\tname\n1190\t2016-04-18\tBlack wolf\n568\t2016-04-18\tBrown bear\n1298\t2016-04-18\tBrown cow\n1413\t2016-04-18\tBull\n602\t2016-04-18\tDeer\n1023\t2016-04-18\tHorse\n888\t2016-04-18\tMountain lion\n1206\t2016-04-19\tBlack wolf\n591\t2016-04-19\tBrown bear\n1305\t2016-04-19\tBrown cow\n1428\t2016-04-19\tBull\n619\t2016-04-19\tDeer\n1059\t2016-04-19\tHorse\n902\t2016-04-19\tMountain lion\n1246\t2016-04-20\tBlack wolf\n600\t2016-04-20\tBrown bear\n1309\t2016-04-20\tBrown cow\n1281\t2016-04-20\tBull\n610\t2016-04-20\tDeer\n1058\t2016-04-20\tHorse\n933\t2016-04-20\tMountain lion\n1204\t2016-04-21\tBlack wolf\n602\t2016-04-21\tBrown bear\n1315\t2016-04-21\tBrown cow\n1293\t2016-04-21\tBull\n601\t2016-04-21\tDeer\n1040\t2016-04-21\tHorse\n902\t2016-04-21\tMountain lion\n1217\t2016-04-22\tBlack wolf\n608\t2016-04-22\tBrown bear\n1314\t2016-04-22\tBrown cow\n1294\t2016-04-22\tBull\n626\t2016-04-22\tDeer\n1060\t2016-04-22\tHorse\n907\t2016-04-22\tMountain lion\n1211\t2016-04-23\tBlack wolf\n605\t2016-04-23\tBrown bear\n1173\t2016-04-23\tBrown cow\n1291\t2016-04-23\tBull\n609\t2016-04-23\tDeer\n869\t2016-04-23\tHorse\n907\t2016-04-23\tMountain lion\n1226\t2016-04-24\tBlack wolf\n612\t2016-04-24\tBrown bear\n1171\t2016-04-24\tBrown cow\n1291\t2016-04-24\tBull\n601\t2016-04-24\tDeer\n910\t2016-04-24\tHorse\n911\t2016-04-24\tMountain lion\n","comment":"","msgTable":[[{"key":"date","value":"1190"},{"key":"date","value":"2016-04-18"},{"key":"date","value":"Black wolf"}],[{"key":"name","value":"568"},{"key":"name","value":"2016-04-18"},{"key":"name","value":"Brown bear"}],[{"value":"1298"},{"value":"2016-04-18"},{"value":"Brown cow"}],[{"value":"1413"},{"value":"2016-04-18"},{"value":"Bull"}],[{"value":"602"},{"value":"2016-04-18"},{"value":"Deer"}],[{"value":"1023"},{"value":"2016-04-18"},{"value":"Horse"}],[{"value":"888"},{"value":"2016-04-18"},{"value":"Mountain lion"}],[{"value":"1206"},{"value":"2016-04-19"},{"value":"Black wolf"}],[{"value":"591"},{"value":"2016-04-19"},{"value":"Brown bear"}],[{"value":"1305"},{"value":"2016-04-19"},{"value":"Brown cow"}],[{"value":"1428"},{"value":"2016-04-19"},{"value":"Bull"}],[{"value":"619"},{"value":"2016-04-19"},{"value":"Deer"}],[{"value":"1059"},{"value":"2016-04-19"},{"value":"Horse"}],[{"value":"902"},{"value":"2016-04-19"},{"value":"Mountain lion"}],[{"value":"1246"},{"value":"2016-04-20"},{"value":"Black wolf"}],[{"value":"600"},{"value":"2016-04-20"},{"value":"Brown bear"}],[{"value":"1309"},{"value":"2016-04-20"},{"value":"Brown cow"}],[{"value":"1281"},{"value":"2016-04-20"},{"value":"Bull"}],[{"value":"610"},{"value":"2016-04-20"},{"value":"Deer"}],[{"value":"1058"},{"value":"2016-04-20"},{"value":"Horse"}],[{"value":"933"},{"value":"2016-04-20"},{"value":"Mountain lion"}],[{"value":"1204"},{"value":"2016-04-21"},{"value":"Black wolf"}],[{"value":"602"},{"value":"2016-04-21"},{"value":"Brown bear"}],[{"value":"1315"},{"value":"2016-04-21"},{"value":"Brown cow"}],[{"value":"1293"},{"value":"2016-04-21"},{"value":"Bull"}],[{"value":"601"},{"value":"2016-04-21"},{"value":"Deer"}],[{"value":"1040"},{"value":"2016-04-21"},{"value":"Horse"}],[{"value":"902"},{"value":"2016-04-21"},{"value":"Mountain lion"}],[{"value":"1217"},{"value":"2016-04-22"},{"value":"Black wolf"}],[{"value":"608"},{"value":"2016-04-22"},{"value":"Brown bear"}],[{"value":"1314"},{"value":"2016-04-22"},{"value":"Brown cow"}],[{"value":"1294"},{"value":"2016-04-22"},{"value":"Bull"}],[{"value":"626"},{"value":"2016-04-22"},{"value":"Deer"}],[{"value":"1060"},{"value":"2016-04-22"},{"value":"Horse"}],[{"value":"907"},{"value":"2016-04-22"},{"value":"Mountain lion"}],[{"value":"1211"},{"value":"2016-04-23"},{"value":"Black wolf"}],[{"value":"605"},{"value":"2016-04-23"},{"value":"Brown bear"}],[{"value":"1173"},{"value":"2016-04-23"},{"value":"Brown cow"}],[{"value":"1291"},{"value":"2016-04-23"},{"value":"Bull"}],[{"value":"609"},{"value":"2016-04-23"},{"value":"Deer"}],[{"value":"869"},{"value":"2016-04-23"},{"value":"Horse"}],[{"value":"907"},{"value":"2016-04-23"},{"value":"Mountain lion"}],[{"value":"1226"},{"value":"2016-04-24"},{"value":"Black wolf"}],[{"value":"612"},{"value":"2016-04-24"},{"value":"Brown bear"}],[{"value":"1171"},{"value":"2016-04-24"},{"value":"Brown cow"}],[{"value":"1291"},{"value":"2016-04-24"},{"value":"Bull"}],[{"value":"601"},{"value":"2016-04-24"},{"value":"Deer"}],[{"value":"910"},{"value":"2016-04-24"},{"value":"Horse"}],[{"value":"911"},{"value":"2016-04-24"},{"value":"Mountain lion"}]],"columnNames":[{"name":"count","index":0,"aggr":"sum"},{"name":"date","index":1,"aggr":"sum"},{"name":"name","index":2,"aggr":"sum"}],"rows":[["1190","2016-04-18","Black wolf"],["568","2016-04-18","Brown bear"],["1298","2016-04-18","Brown cow"],["1413","2016-04-18","Bull"],["602","2016-04-18","Deer"],["1023","2016-04-18","Horse"],["888","2016-04-18","Mountain lion"],["1206","2016-04-19","Black wolf"],["591","2016-04-19","Brown bear"],["1305","2016-04-19","Brown cow"],["1428","2016-04-19","Bull"],["619","2016-04-19","Deer"],["1059","2016-04-19","Horse"],["902","2016-04-19","Mountain lion"],["1246","2016-04-20","Black wolf"],["600","2016-04-20","Brown bear"],["1309","2016-04-20","Brown cow"],["1281","2016-04-20","Bull"],["610","2016-04-20","Deer"],["1058","2016-04-20","Horse"],["933","2016-04-20","Mountain lion"],["1204","2016-04-21","Black wolf"],["602","2016-04-21","Brown bear"],["1315","2016-04-21","Brown cow"],["1293","2016-04-21","Bull"],["601","2016-04-21","Deer"],["1040","2016-04-21","Horse"],["902","2016-04-21","Mountain lion"],["1217","2016-04-22","Black wolf"],["608","2016-04-22","Brown bear"],["1314","2016-04-22","Brown cow"],["1294","2016-04-22","Bull"],["626","2016-04-22","Deer"],["1060","2016-04-22","Horse"],["907","2016-04-22","Mountain lion"],["1211","2016-04-23","Black wolf"],["605","2016-04-23","Brown bear"],["1173","2016-04-23","Brown cow"],["1291","2016-04-23","Bull"],["609","2016-04-23","Deer"],["869","2016-04-23","Horse"],["907","2016-04-23","Mountain lion"],["1226","2016-04-24","Black wolf"],["612","2016-04-24","Brown bear"],["1171","2016-04-24","Brown cow"],["1291","2016-04-24","Bull"],["601","2016-04-24","Deer"],["910","2016-04-24","Horse"],["911","2016-04-24","Mountain lion"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4953","dateFinished":"2016-10-06T18:28:08+0000","dateStarted":"2016-10-06T18:25:06+0000","focus":true},{"text":"%md\n&nbsp;\n####So you would create a rollup table that was local so later displays would only need to hit the summary table","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400668_-465556038","id":"20161006-162948_453803059","result":{"code":"SUCCESS","type":"HTML","msg":"<p>&nbsp;</p>\n<h4>So you would create a rollup table that was local so later displays would only need to hit the summary table</h4>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4954"},{"text":"%psql\nDROP TABLE IF EXISTS creature_population;\nCREATE TABLE creature_population AS (\nSELECT COUNT(DISTINCT(wurmid)) as \"count\", recordedAt::date as \"date\", name\nFROM wurm_partitioned\nWHERE recordedAt BETWEEN '2016-04-18 00:00:00' AND '2016-04-24 23:59:59'\nAND name IN ('Black wolf','Horse','Brown cow','Bull','Brown bear','Mountain lion','Deer','Black Bear')\nGROUP BY recordedAt::date, name );","dateUpdated":"2016-10-06T18:46:45+0000","config":{"tableHide":false,"graph":{"mode":"table","height":94,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":4,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400669_-465940787","id":"20161006-163106_341960782","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4955","dateFinished":"2016-10-06T18:49:35+0000","dateStarted":"2016-10-06T18:46:45+0000","focus":true},{"text":"%psql\nSELECT * from creature_population\nORDER BY date, name;","dateUpdated":"2016-10-06T18:46:40+0000","config":{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"date","index":1,"aggr":"sum"}],"values":[{"name":"count","index":0,"aggr":"sum"}],"groups":[{"name":"name","index":2,"aggr":"sum"}],"scatter":{"xAxis":{"name":"count","index":0,"aggr":"sum"},"yAxis":{"name":"date","index":1,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":8,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400669_-465940787","id":"20161006-163241_1799456698","result":{"code":"ERROR","type":"TEXT","msg":"ERROR: relation \"creature_population\" does not exist\n  Position: 15"},"dateCreated":"2016-10-06T05:36:40+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:4956","dateFinished":"2016-10-06T18:46:40+0000","dateStarted":"2016-10-06T18:46:40+0000","focus":true},{"text":"%md\n##-----------------------------------------------------------------------------------------------------------------------------","dateUpdated":"2016-10-06T05:36:40+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/markdown","editorHide":true,"colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400669_-465940787","id":"20161005-210412_1902327750","result":{"code":"SUCCESS","type":"HTML","msg":"<h2>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</h2>\n"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4957"},{"text":"%psql\n--cleanup\n--if a command does not work comment it out and rerun\n--uncomment all drops initially\n--DROP TABLE IF EXISTS s3_wurm_20160415 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160416 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160417 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160418 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160419 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160420 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160421 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160422 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160423 CASCADE;\n--DROP TABLE IF EXISTS s3_wurm_20160424 CASCADE;\n\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160415 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160416 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160417 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160418 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160419 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160420 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160421 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160422 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160423 CASCADE;\nDROP EXTERNAL TABLE IF EXISTS s3_wurm_20160424 CASCADE;\n\nDROP TABLE IF EXISTS wurm_20160415;\nDROP TABLE IF EXISTS wurm_partitioned;\nDROP TABLE IF EXISTS creature_population;","dateUpdated":"2016-10-06T05:36:40+0000","config":{"tableHide":false,"graph":{"mode":"table","height":294,"optionOpen":false,"keys":[{"name":"Update Count","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"Update Count","index":0,"aggr":"sum"}}},"editorMode":"ace/mode/scala","colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400670_-464786540","id":"20161005-215139_1535086333","result":{"code":"SUCCESS","type":"TABLE","msg":"Update Count\n0\n","comment":"","msgTable":[[{"value":"0"}]],"columnNames":[{"name":"Update Count","index":0,"aggr":"sum"}],"rows":[["0"]]},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4958"},{"dateUpdated":"2016-10-06T05:37:04+0000","config":{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"editorMode":"ace/mode/scala","colWidth":12,"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1475775400670_-464786540","id":"20160907-161244_514343028","result":{"code":"SUCCESS","type":"TEXT"},"dateCreated":"2016-10-06T05:36:40+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4959","text":""}],"name":"GPDB S3","id":"2BZER86MN","angularObjects":{"2BX6NCE3T:shared_process":[],"2BWN5PFPM:shared_process":[],"2BYE4AJWF:shared_process":[],"2BWYKDNYR:shared_process":[],"2BXUDD2ET:shared_process":[],"2BXQRWP7N:shared_process":[],"2C17AC6HR:shared_process":[],"2BYBHWXBN:shared_process":[],"2BXQAB8FP:shared_process":[],"2C13HZFRZ:shared_process":[],"2BZC4T8QH:shared_process":[],"2BXH58TG7:shared_process":[],"2BX1F7W21:shared_process":[],"2BXXBY5U4:shared_process":[],"2BXJF8ZB8:shared_process":[],"2BWU1JZV2:shared_process":[],"2BYH8X99H:shared_process":[],"2BYTK9435:shared_process":[]},"config":{"looknfeel":"default"},"info":{},"checkpoint":{"message":"s3 protocol"}}